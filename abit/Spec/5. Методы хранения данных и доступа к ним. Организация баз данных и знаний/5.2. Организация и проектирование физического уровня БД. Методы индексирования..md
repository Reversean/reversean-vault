# Организация и проектирование физического уровня БД. Методы индексирования

Физический уровень базы данных (БД) отвечает за конкретные методы хранения данных, структуры данных на диске, механизмы доступа и оптимизацию выполнения запросов. Эффективное проектирование на этом уровне обеспечивает высокую производительность и масштабируемость СУБД.

---

## Цели проектирования физического уровня

- Оптимизация времени доступа к данным;
    
- Снижение накладных расходов на хранение;
    
- Поддержка конкурентного доступа и восстановления;
    
- Повышение эффективности выполнения типичных операций (например, JOIN, SELECT).
    

---

## Элементы физической организации

1. **Физическая организация таблиц**:
    
    - Размещение строк таблицы в страницах диска;
        
    - Учет выравнивания, паддинга и плотности хранения;
        
    - Использование кластерных и некластерных таблиц.
        
2. **Файловые организации**:
    
    - **Heap file** — произвольное размещение записей;
        
    - **Sorted file** — упорядоченное размещение по ключу;
        
    - **Hashed file** — доступ по хэш-ключу;
        
    - **Clustered file** — группы записей, хранимые вместе.
        
3. **Буферизация и кеширование**:
    
    - Буферный пул страниц (Buffer Pool);
        
    - LRU-алгоритмы замещения;
        
    - Предвыборка и отложенная запись (write-behind).
        
4. **Журнализация и восстановление**:
    
    - Журнал операций (Write-Ahead Logging, WAL);
        
    - Контрольные точки (checkpoints);
        
    - Механизмы undo/redo.
        

---

## Методы индексирования

Индексы позволяют существенно ускорить выполнение операций поиска и сортировки.

### 1. Деревья B-типа (B-tree, B+-tree)

- **B-tree**: сбалансированное дерево, в котором каждая вершина содержит несколько ключей;
    
- **B+-tree**: все значения хранятся в листовых узлах, внутренние узлы содержат только ключи навигации;
    
- Поддерживают диапазонные запросы и упорядоченный доступ.
    

O(log⁡bN) — сложность поиска в B-tree, где b — порядок дереваO(\log_b N) \text{ — сложность поиска в B-tree, где } b \text{ — порядок дерева}

### 2. Хэш-индексы

- Используют хэш-функции для определения расположения записи;
    
- Эффективны для точечного поиска;
    
- Не подходят для диапазонных запросов;
    
- Возможны конфликты, решаемые методом цепочек или открытой адресацией.
    

### 3. Bitmap-индексы

- Эффективны для атрибутов с небольшим доменом значений;
    
- Каждый бит вектор соответствует возможному значению поля;
    
- Быстро выполняются булевы операции AND, OR, NOT над битовыми строками;
    
- Поддержка компрессии (например, WAH, EWAH).
    

### 4. Индексы полного текста (Full-text indexes)

- Используются для текстового поиска;
    
- Поддерживают морфологию, синонимы, релевантность;
    
- Применяются механизмы обратного индекса (inverted index).
    

---

## Связанные понятия

- [Реляционная модель данных]
    
- [Нормализация отношений]
    
- [Архитектура СУБД]
    
- [Планировщик запросов]
    
- [Буферный менеджер СУБД]
    
- [B-tree и его вариации]
    
- [Хэш-функции в базах данных]
    

---

Физическое проектирование баз данных — это ключевая область, объединяющая аспекты системного программирования, архитектуры хранилищ и теории алгоритмов. Выбор конкретной файловой организации и структуры индексации должен учитывать статистику данных и характер запросов, что предполагает тесную связь с модулем оптимизации запросов и мониторинга производительности.