## Основы построения трансляторов

Трансляторы, или компиляторы — это программы, которые преобразуют исходный код, написанный на одном языке программирования, в эквивалентный код на другом языке, обычно машинном или промежуточном. Основные этапы построения трансляторов включают анализ исходного кода, синтаксический разбор, оптимизацию и генерацию кода.

## Структура оптимизирующего транслятора

Оптимизирующий компилятор — компилятор, в котором используются различные методы получения более оптимального программного кода при сохранении его функциональных возможностей. Наиболее распространённые цели оптимизации: сокращение времени выполнения программы, повышение производительности, компактификация программного кода, экономия памяти, минимизация энергозатрат, уменьшение количества операций ввода-вывода.

- **Лексический анализатор (лексер)**:
    
    - Преобразует исходный текст программы в последовательность токенов (лексем).
    - Удаляет пробелы, комментарии и обрабатывает лексические ошибки.
    
- **Синтаксический анализатор (парсер)**:
    
    - Строит синтаксическое дерево или абстрактное синтаксическое дерево (AST) на основе последовательности токенов.
    - Проверяет соответствие исходного кода грамматике языка.
    
- **Семантический анализатор**:
    
    - Проверяет семантическую корректность программы, включая типизацию, области видимости и использование идентификаторов.
    - Строит и обновляет символическую таблицу.
    
- **Промежуточное представление (IR)**:
    
    - Преобразует AST в промежуточное представление, которое является независимым от исходного и целевого языков.
    - Примеры промежуточных представлений: трехадресный код, статический однозначный код (SSA), промежуточный язык LLVM (LLVM IR).
    
- **Оптимизатор**:
    
    - Выполняет различные оптимизации на промежуточном представлении, такие как удаление мертвого кода, сворачивание констант, циклические преобразования и др.
    - Оптимизации могут быть локальными (в пределах одного базового блока) или глобальными (на уровне всей программы).
    
- **Генератор кода**:
    
    - Преобразует оптимизированное промежуточное представление в машинный код целевой архитектуры.
    - Включает управление регистрами, выбор инструкций и размещение памяти.
    
- **Компоновщик**:
    
    - Может быть как частью компилятора, так и отдельной программой.
    - Линкер объединяет различные объектные файлы и библиотеки в единый исполняемый файл.
    - Загрузчик загружает исполняемый файл в память и подготавливает его к выполнению.
    

## Промежуточные представления программы

Промежуточное представление (IR) играет ключевую роль в процессе трансляции, служа мостом между исходным и целевым кодом.

-  AST
	
	- Структурное представление программы 
	- Отличие от синтаксического дерева (дерева разбора): ◦ 
		- Удаление большинства нетерминальных узлов, имеющих одного потомка 
		- Замена части терминальных символов атрибутами узлов 
		- Модификация группирующих узлов 
	- По модели АСД легко восстановить исходную программу с точностью до форматирования и комментариев 
	- Строится из дерева разбора путем постобработки
	
- CFG
	
	- Потоки управления программы представляются в виде направленного графа
	- CFG используется для:
		- Генерации кода
		- Оптимизации программ
		- Обнаружения ошибок в программе
		- И т.п.
	- ГПУ строится с помощью анализа АСД на основе семантики языковых конструкций ◦
	- Проблемные конструкции языков программирования: 
		- Вычисляемые безусловные переходы (goto)
		- Вызов функции по указателю
		- Полиморфизм
		- Структурная обработка исключений
		- Параллелизм 
		- И т.п.
	
 - DDG
	
	- Отображает связи по данными между объектами программы
	- Показывает зависимости между объявлениями, инициализациями, присваиваниями объектов и их использованиями
	- Определяется структурой программы, семантикой конструкций 
	- Используется для: 
		- Оптимизации программ 
		- Автоматического распараллеливания программ
		- Обнаружения неинициализированных объектов
		- Обнаружения некорректно инициализированных объектов
		- и т.п.
	
- PDG
	
	- Содержит два типа связей:
		- Связи потока управления
		- Зависимости по данным
	- Используется для
		- Оптимизации 
		- Генерации кода
		- Анализа программ
		- Верификации
		- И т.п.
	
 - SSA
	
	- Модель, объединяющая граф потока управления и элементы зависимости по данным 
	- Значения всем объектам программы присваиваются один раз 
	- Вводится версионирование для каждого очередного присваивания объекта 
	- При обращении к значению объекта используется последняя версия по ходу графа потока управления 
	- Неоднозначность разрешается с помощью ɸ-функции
	- Используется в компиляторах, статических анализаторах, верификаторах: 
		- Распространение констант (constant propagation)
		- Обнаружение удаление мёртвого кода
		- Обнаружение неинициализированных объектов 
		- Распараллеливание 
		- Генерация кода
		- Преобразование программы / части программы в формулы для последующей верификации 
		- И т.п.
	
- ASG
	
	- Наиболее общая модель, объединяющая структурные и поведенческие компоненты 
	- Абстрактный синтаксический граф обогащается семантической информацией:
		- Связи по данным
		- Связи по управлению
		- Типами данных
		- И т.п.
	
 