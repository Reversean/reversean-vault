# Метод включений и исключений

Метод используется для подсчёта мощности объединения множеств с учётом пересечений.

Формула:

∣A1∪A2∪⋯∪An∣=∑∣Ai∣−∑∣Ai∩Aj∣+∑∣Ai∩Aj∩Ak∣−⋯+(−1)n+1∣A1∩⋯∩An∣|A_1 \cup A_2 \cup \dots \cup A_n| = \sum |A_i| - \sum |A_i \cap A_j| + \sum |A_i \cap A_j \cap A_k| - \dots + (-1)^{n+1} |A_1 \cap \dots \cap A_n|

Применения:

- Подсчёт перестановок с ограничениями (например, дерранжменты)
    
- Задачи на размещение с ограничениями (например, "ни один элемент не на месте")
    
- Решение задач с повторениями и перекрытиями
    

Пример: число дерранжментов (перестановок без неподвижных точек):

Dn=n!∑k=0n(−1)kk!D_n = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!}

---